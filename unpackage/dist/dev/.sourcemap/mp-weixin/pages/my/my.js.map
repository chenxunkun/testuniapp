{"version":3,"file":"my.js","sources":["pages/my/my.vue","C:/Users/king/Desktop/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbXkvbXkudnVl"],"sourcesContent":["<template>\r\n\t<view class=\"content\">\r\n\t\t<view class=\"topBox\">\r\n\t\t\t<view class=\"setbox\">\r\n\t\t\t\t<view class=\"set-left\">\r\n\t\t\t\t\t<uni-icons type=\"calendar\" size=\"30\" color=\"#fff\"></uni-icons>\r\n\t\t\t\t\t<view class=\"txt\">\r\n\t\t\t\t\t\t签到\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"set-right\">\r\n\t\t\t\t\t<uni-icons type=\"gear\" size=\"30\" color=\"#fff\"></uni-icons>\r\n\t\t\t\t\t<uni-icons type=\"chat\" size=\"30\" color=\"#fff\"></uni-icons>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"users\" @click=\"setFun\">\r\n\t\t\t\t<view class=\"u-top\">\r\n\t\t\t\t\t<template v-if=\"!userInfo.nickName\">\r\n\t\t\t\t\t\t<image src=\"../../static/tt.jpg\" mode=\"aspectFill\"></image>\r\n\t\t\t\t\t\t<view class=\"tit\">\r\n\t\t\t\t\t\t\t注册/登录\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t\t<template v-else>\r\n\t\t\t\t\t\t<image :src=\"userInfo.avatarUrl\" mode=\"aspectFill\"></image>\r\n\t\t\t\t\t\t<view class=\"tit\">\r\n\t\t\t\t\t\t\t{{userInfo.nickName}}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</template>\r\n\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"u-bottom\">\r\n\t\t\t\t\t<view class=\"u-item\">\r\n\t\t\t\t\t\t<view class=\"num\">12</view>\r\n\t\t\t\t\t\t<view class=\"u-tit\">点赞</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"u-item\">\r\n\t\t\t\t\t\t<view class=\"num\">12</view>\r\n\t\t\t\t\t\t<view class=\"u-tit\">点赞</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"u-item\">\r\n\t\t\t\t\t\t<view class=\"num\">12</view>\r\n\t\t\t\t\t\t<view class=\"u-tit\">点赞</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"u-item\">\r\n\t\t\t\t\t\t<view class=\"num\">12</view>\r\n\t\t\t\t\t\t<view class=\"u-tit\">点赞</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<view class=\"listBox\">\r\n\t\t\t<view class=\"lists\">\r\n\t\t\t\t<uni-list>\r\n\t\t\t\t\t<uni-list-item :show-extra-icon=\"true\" :extra-icon=\"extraIcon1\" showArrow title=\"个人信息\" clickable></uni-list-item>\r\n\t\t\t\t\t<uni-list-item :show-extra-icon=\"true\" :extra-icon=\"extraIcon2\" showArrow title=\"我的购物车\" clickable></uni-list-item>\r\n\t\t\t\t\t<uni-list-item :show-extra-icon=\"true\" :extra-icon=\"extraIcon3\" showArrow title=\"用户反馈\" clickable></uni-list-item>\r\n\t\t\t\t\t<uni-list-item :show-extra-icon=\"true\" :extra-icon=\"extraIcon4\" showArrow title=\"我的邮件\" clickable></uni-list-item>\r\n\t\t\t\t\t<uni-list-item :show-extra-icon=\"true\" :extra-icon=\"extraIcon5\" showArrow title=\"分享有礼\" clickable></uni-list-item>\r\n\t\t\r\n\t\t\t\t</uni-list>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\t<up-popup  closeable :show=\"show\" @close=\"close\" >\r\n\t\t\t\t<view class=\"popup\">\r\n\t\t\t\t\t<view class=\"title\">\r\n\t\t\t\t\t\t获取您的昵称 头像\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"flex\">\r\n\t\t\t\t\t\t<view class=\"laber\">\r\n\t\t\t\t\t\t\t获取用户头像:\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<button class=\"avatar-warpper\" open-type=\"chooseAvatar\" @chooseavatar=\"onChooseavatar\">\r\n\t\t\t\t\t\t\t<image class=\"avatar\" :src=\"userInfo.avatarUrl\"></image>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"flex\">\r\n\t\t\t\t\t\t<view class=\"laber\">\r\n\t\t\t\t\t\t\t获取用户昵称:\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t<input @input= \"changeName\" type=\"nickname\" />\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<button size=\"default\" type=\"primary\" @click=\"userSubmit\">确定</button>\r\n\t\t\t\t</view>\r\n\t\t\t</up-popup>\r\n\t\t\r\n\r\n\t</view>\r\n\t\r\n</template>\r\n\r\n<script setup>\r\n\timport {ref,reactive} from 'vue'\r\n\timport {onLoad} from '@dcloudio/uni-app'\r\n\t\r\n\timport {login,getUserInfo} from '../../api/api.js'\r\n\t\r\n\tconst show=ref(false)\r\n\t\r\n\tconst  close =()=>{\r\n\t\tshow.value=false\r\n\t}\r\n\t\r\n\tconst  userSubmit =()=>{\r\n\t\tuni.setStorageSync('userInfo',JSON.stringify(userInfo))\r\n\t\tshow.value=false\r\n\t}\r\n\t\r\n\tconst onChooseavatar  =(e)=>{\r\n\t\tuserInfo.avatarUrl=e.detail.avatarUrl\r\n\t}\r\n\r\n\tconst changeName  =(e)=>{\r\n\t\tuserInfo.nickName=e.detail.value\r\n\t}\r\n\t\r\n\t\r\n\tonLoad(async()=>{\r\n\t\t//免登逻辑\r\n\t\tif(uni.getStorageSync('token')&&!uni.getStorageSync('userInfo')){\r\n\t\t\tconst{avatarUrl,nickName}=await getUserInfo()\r\n\t\t\tuserInfo.avatarUrl=avatarUrl\r\n\t\t\tuserInfo.nickName=nickName\r\n\t\t}else if(uni.getStorageSync('token')&&uni.getStorageSync('userInfo')){\r\n\t\t\tconst{avatarUrl,nickName}=JSON.parse(uni.getStorageSync('userInfo'))\r\n\t\t\tuserInfo.avatarUrl=avatarUrl\r\n\t\t\tuserInfo.nickName=nickName\r\n\t\t}\r\n\t})\r\n\r\n\tconst userInfo = reactive({\r\n\t\tnickName: '',\r\n\t\tavatarUrl: ''\r\n\r\n\t})\r\n\t\r\n\tconst extraIcon1 = reactive({\r\n\t    color: '#666666',\r\n\t    size: '22',\r\n\t    type: 'auth'\r\n\t})\r\n\t\r\n\tconst extraIcon2 = reactive({\r\n\t    color: '#666666',\r\n\t    size: '22',\r\n\t    type: 'cart'\r\n\t})\r\n\t\r\n\tconst extraIcon3 = reactive({\r\n\t    color: '#666666',\r\n\t    size: '22',\r\n\t    type: 'chatboxes'\r\n\t})\r\n\t\r\n\tconst extraIcon4 = reactive({\r\n\t    color: '#666666',\r\n\t    size: '22',\r\n\t    type: 'email'\r\n\t})\r\n\t\r\n\tconst extraIcon5 = reactive({\r\n\t    color: '#666666',\r\n\t    size: '22',\r\n\t    type: 'gift'\r\n\t})\r\n\t\r\n\t\r\n\t\r\n\tconst setFun=()=>{\r\n\t\tuni.showModal({\r\n\t\t\ttitle:'温馨提示',\r\n\t\t\tcontent:'亲,授权微信登录后才能正常使用小程序',\r\n\t\t\tsuccess(res){\r\n\t\t\t\t// if(res.confirm){\r\n\t\t\t\t// \tuni.getUserProfile({\r\n\t\t\t\t// \t\tdesc: \"获取用户头像和昵称\",\r\n\t\t\t\t// \t\tsuccess(res) {\r\n\t\t\t\t// \t\t\tconsole.log(res, 'success')\r\n\t\t\t\t// \t\t},\r\n\t\t\t\t// \t\tfail(err) {\r\n\t\t\t\t// \t\t\tconsole.log(err, 'fail')\r\n\t\t\t\t// \t\t}\r\n\t\t\t\t// \t})\r\n\t\t\t\t// }\r\n\t\t\t\tuni.login({\r\n\t\t\t\t\tsuccess: async(data)=>{\r\n\t\t\t\t\t\tconsole.log(data)\r\n\t\t\t\t\t\tconst {token} = await login(data.code)\r\n\t\t\t\t\t\tconsole.log(token,'token')\r\n\t\t\t\t\t\tuni.setStorageSync('token',token)\r\n\t\t\t\t\t\tconst {avatarUrl,nickName}=await getUserInfo()\r\n\t\t\t\t\t\tuserInfo.avatarUrl=avatarUrl\r\n\t\t\t\t\t\tuserInfo.nickName=nickName\r\n\t\t\t\t\t\tshow.value=true\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t.content {\r\n\t\theight: 100vh;\r\n\t\tbackground-color: #f5f5f5;\r\n\r\n\t\t.topBox {\r\n\r\n\t\t\twidth: 100%;\r\n\t\t\tposition: relative;\r\n\t\t\tz-index: 1;\r\n\t\t\toverflow: hidden;\r\n\t\t\tpadding: 40rpx 20rpx 40rpx;\r\n\t\t\tbox-sizing: border-box;\r\n\t\t}\r\n\r\n\t\t.topBox::after {\r\n\t\t\tbackground-color: #00aaff;\r\n\t\t\tcontent: \"\";\r\n\t\t\twidth: 140%;\r\n\t\t\theight: 200px;\r\n\t\t\tposition: absolute;\r\n\t\t\tz-index: -1;\r\n\t\t\ttop: 0;\r\n\t\t\tleft: -20%;\r\n\t\t\tborder-radius: 0 0 50% 50%;\r\n\t\t}\r\n\r\n\t\t.setbox {\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: space-between;\r\n\t\t\talign-items: center;\r\n\r\n\t\t\t.set-left {\r\n\t\t\t\twidth: 18%;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: space-between;\r\n\t\t\t\talign-items: center;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t.txt {\r\n\t\t\t\tcolor: #fff;\r\n\t\t\t\tfont-size: 30rpx;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.users {\r\n\t\t\tmargin-top: 35rpx;\r\n\t\t\tpadding: 30rpx;\r\n\t\t\tbox-sizing: border-box;\r\n\t\t\theight: 280rpx;\r\n\t\t\tbackground-color: #fff;\r\n\t\t\tbox-shadow: 1px 10rpx 20rpx #ececec;\r\n\t\t\tborder-radius: 16rpx;\r\n\r\n\t\t\t.u-top {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: flex-start;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tmargin-bottom: 30rpx;\r\n\r\n\t\t\t\timage {\r\n\t\t\t\t\twidth: 100rpx;\r\n\t\t\t\t\theight: 100rpx;\r\n\t\t\t\t\tborder-radius: 50%;\r\n\t\t\t\t\tmargin-right: 20rpx;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.tit {\r\n\t\t\t\t\tfont-size: 30rpx;\r\n\t\t\t\t\tfont-weight: 700;\r\n\t\t\t\t\tcolor: #333;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t.u-bottom {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: space-around;\r\n\t\t\t\talign-items: center;\r\n\r\n\t\t\t\t.u-item {\r\n\t\t\t\t\ttext-align: center;\r\n\r\n\t\t\t\t\t.u-tit {\r\n\t\t\t\t\t\tcolor: #757575;\r\n\t\t\t\t\t\tfont-size: 26rpx;\r\n\t\t\t\t\t\tmargin-top: 10rpx;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.num {\r\n\t\t\t\t\t\tcolor: #000;\r\n\t\t\t\t\t\tfont-size: 33rpx;\r\n\t\t\t\t\t\tfont-weight: 700;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\t.popup{\r\n\t\t\tpadding: 20rpx;\r\n\t\t\tborder-radius: 20rpx 20rpx 0 0;\r\n\t\t\t.title{\r\n\t\t\t\tfont-size: 40rpx;\r\n\t\t\t\tmargin-bottom: 20rpx;\r\n\t\t\t\ttext-align: center;\r\n\t\t\t}\r\n\t\t\t.flex{\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: flex-start;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tborder-bottom: 1px solid #f5f5f5;\r\n\t\t\t\tpadding: 24rpx 0;\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\timage{\r\n\t\t\t\twidth: 70rpx;\r\n\t\t\t\theight: 70rpx;\r\n\t\t\t}\r\n\t\t\t.avatar-warpper{\r\n\t\t\t\tborder: none;\r\n\t\t\t\tborder-radius: 10rpx;\r\n\t\t\t\twidth: 70rpx;\r\n\t\t\t\theight: 70rpx;\r\n\t\t\t\tmargin-left: 20rpx;\r\n\t\t\t\t padding: 0;\r\n\t\t\t}\r\n\t\t}\r\n\t\t.listBox{\r\n\t\t\theight: 200rpx;\r\n\t\t\tmargin: -10rpx auto 0;\r\n\t\t\tpadding: 20rpx;\r\n\t\t\tbox-sizing: border-box;\r\n\t\t\tborder-radius: 12rpx;\r\n\t\t}\r\n\t}\r\n</style>","import MiniProgramPage from 'F:/uniapp/test旅游项目/pages/my/my.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","uni","onLoad","getUserInfo","reactive","login"],"mappings":";;;;;;;;;;;;;;;;;;;;;AAmGC,UAAM,OAAKA,cAAG,IAAC,KAAK;AAEpB,UAAO,QAAO,MAAI;AACjB,WAAK,QAAM;AAAA,IACX;AAED,UAAO,aAAY,MAAI;AACtBC,oBAAG,MAAC,eAAe,YAAW,KAAK,UAAU,QAAQ,CAAC;AACtD,WAAK,QAAM;AAAA,IACX;AAED,UAAM,iBAAiB,CAAC,MAAI;AAC3B,eAAS,YAAU,EAAE,OAAO;AAAA,IAC5B;AAED,UAAM,aAAa,CAAC,MAAI;AACvB,eAAS,WAAS,EAAE,OAAO;AAAA,IAC3B;AAGDC,kBAAAA,OAAO,YAAS;AAEf,UAAGD,cAAAA,MAAI,eAAe,OAAO,KAAG,CAACA,oBAAI,eAAe,UAAU,GAAE;AAC/D,cAAK,EAAC,WAAU,SAAQ,IAAE,MAAME,QAAAA,YAAa;AAC7C,iBAAS,YAAU;AACnB,iBAAS,WAAS;AAAA,MACrB,WAAWF,cAAG,MAAC,eAAe,OAAO,KAAGA,oBAAI,eAAe,UAAU,GAAE;AACpE,cAAK,EAAC,WAAU,SAAQ,IAAE,KAAK,MAAMA,cAAG,MAAC,eAAe,UAAU,CAAC;AACnE,iBAAS,YAAU;AACnB,iBAAS,WAAS;AAAA,MAClB;AAAA,IACH,CAAE;AAED,UAAM,WAAWG,cAAAA,SAAS;AAAA,MACzB,UAAU;AAAA,MACV,WAAW;AAAA,IAEb,CAAE;AAED,UAAM,aAAaA,cAAAA,SAAS;AAAA,MACxB,OAAO;AAAA,MACP,MAAM;AAAA,MACN,MAAM;AAAA,IACX,CAAE;AAED,UAAM,aAAaA,cAAAA,SAAS;AAAA,MACxB,OAAO;AAAA,MACP,MAAM;AAAA,MACN,MAAM;AAAA,IACX,CAAE;AAED,UAAM,aAAaA,cAAAA,SAAS;AAAA,MACxB,OAAO;AAAA,MACP,MAAM;AAAA,MACN,MAAM;AAAA,IACX,CAAE;AAED,UAAM,aAAaA,cAAAA,SAAS;AAAA,MACxB,OAAO;AAAA,MACP,MAAM;AAAA,MACN,MAAM;AAAA,IACX,CAAE;AAED,UAAM,aAAaA,cAAAA,SAAS;AAAA,MACxB,OAAO;AAAA,MACP,MAAM;AAAA,MACN,MAAM;AAAA,IACX,CAAE;AAID,UAAM,SAAO,MAAI;AAChBH,oBAAAA,MAAI,UAAU;AAAA,QACb,OAAM;AAAA,QACN,SAAQ;AAAA,QACR,QAAQ,KAAI;AAYXA,wBAAAA,MAAI,MAAM;AAAA,YACT,SAAS,OAAM,SAAO;AACrBA,4BAAAA,MAAY,MAAA,OAAA,0BAAA,IAAI;AAChB,oBAAM,EAAC,MAAK,IAAI,MAAMI,QAAAA,MAAM,KAAK,IAAI;AACrCJ,4BAAAA,MAAY,MAAA,OAAA,0BAAA,OAAM,OAAO;AACzBA,kCAAI,eAAe,SAAQ,KAAK;AAChC,oBAAM,EAAC,WAAU,SAAQ,IAAE,MAAME,QAAAA,YAAa;AAC9C,uBAAS,YAAU;AACnB,uBAAS,WAAS;AAClB,mBAAK,QAAM;AAAA,YACX;AAAA,UACN,CAAK;AAAA,QACD;AAAA,MACJ,CAAG;AAAA,IACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvMF,GAAG,WAAW,eAAe;"}